# **Campung 프로젝트 분석 보고서**

## **1\. 프로젝트 개요**

**Campung**은 **캠퍼스 기반의 위치 및 감정 공유 소셜 네트워크 서비스**입니다. 사용자는 지도를 중심으로 자신의 감정과 일상을 기록하고, 다른 사용자들과 소통하며, 친구와 실시간으로 위치를 공유할 수 있습니다.

특히, **게시글의 텍스트를 AI로 분석**하여 캠퍼스의 전반적인 감정 상태를 '날씨'와 '온도'라는 독창적인 지표로 시각화하는 핵심 기능을 제공합니다.

* **Backend:** Spring Boot, JPA, MariaDB, Redis  
* **Android App:** Kotlin, Jetpack Compose, MVVM  
* **핵심 기술:** Naver Maps API, OpenAI GPT-5, Firebase (FCM), WebSocket, AWS S3, Docker, GitHub Actions CI/CD

## **2\. 시스템 아키텍처**

본 프로젝트는 모바일 클라이언트와 백엔드 서버가 REST API를 통해 통신하는 표준 클라이언트-서버 아키텍처를 따릅니다.

* **Client (Android):** 사용자 인터페이스와 사용자 경험(UX)을 담당하며, 모든 데이터는 백엔드 서버에 API를 통해 요청합니다.  
* **Backend (Spring Boot):** 비즈니스 로직, 데이터 처리, 외부 서비스 연동을 총괄합니다.  
* **Database (MariaDB & Redis):** MariaDB는 핵심 데이터를 영구 저장하고, Redis는 실시간 인기 게시물 집계 및 캐싱을 통해 성능을 향상시킵니다.  
* **External Services:**  
  * **Naver Maps:** 지도 및 위치 기반 서비스의 핵심 플랫폼입니다.  
  * **Firebase (FCM):** 친구 요청, 위치 공유 등 실시간 푸시 알림을 위해 사용됩니다.  
  * **OpenAI (GPT-5):** 게시글 감정 분석 및 랜드마크 요약 등 핵심 AI 기능을 담당합니다.  
  * **AWS S3:** 이미지, 음성 녹음 등 미디어 파일을 저장합니다.

## **3\. 백엔드 심층 분석 (Spring Boot)**

### **3.1. 핵심 기능: 캠퍼스 감정 분석 시스템 ("감정 날씨 & 온도")**

캠퍼스 내 사용자들의 감정을 실시간으로 분석하여 '날씨'와 '온도'로 시각화하는 독창적인 기능입니다.

**동작 방식:**

1. **데이터 수집 (스케줄링):** EmotionAnalysisScheduler가 매시간 정각, 정해진 시간마다 최근 1시간 동안 작성된 모든 게시글을 데이터베이스에서 조회합니다.  
2. **AI 감정 분석:** EmotionAnalysisService는 수집된 게시글 텍스트를 EmotionPromptBuilder를 통해 GPT-5 API에 최적화된 프롬프트로 가공하여 전송합니다. GPT-5는 각 게시글의 감정(예: 기쁨, 슬픔, 분노 등)을 분석하여 점수를 반환합니다.  
3. **'감정 날씨' 결정:** EmotionCalculatorService는 분석된 감정 점수들을 통계적으로 처리하여 그 시간의 캠퍼스를 대표하는 '감정 날씨'(예: 맑음, 흐림, 비)를 결정합니다.  
4. **'캠퍼스 온도' 계산:** CampusTemperatureManager는 단순한 감정 점수뿐만 아니라, 게시글 작성 빈도, 좋아요, 댓글 수 등 **사용자 활동량**을 종합적으로 분석하여 캠퍼스 온도를 동적으로 조절합니다.  
   * **온도 보호 시스템:** 게시글이 없는 시간에는 온도가 급격히 떨어지지 않도록 하여 자연스러운 변화를 유도합니다.

### **3.2. 실시간 위치 기반 서비스 (LBS)**

**1\. 친구 위치 공유**

* **요청 및 수락:** 사용자가 친구에게 위치 공유를 요청(LocationShareController)하면, FCMService를 통해 상대방에게 실시간 푸시 알림이 전송됩니다.  
* **실시간 위치 전송:** 상대방이 수락하면, 안드로이드 앱의 LocationService가 주기적으로 위치 정보를 백엔드 서버로 전송하고, 이 정보는 다시 요청한 친구에게 실시간으로 전달되어 지도에 표시됩니다.

**2\. Geohash와 WebSocket을 이용한 실시간 알림**

* **Geohash:** 지도상의 특정 영역을 고유한 문자열로 변환하는 기술입니다. GeohashService를 통해 사용자의 현재 지도 화면 영역을 Geohash로 계산합니다.  
* **WebSocket:** 사용자가 지도 화면에 진입하면, 클라이언트는 자신의 Geohash 영역을 WebSocket으로 구독합니다.  
* **실시간 이벤트 전파:** 다른 사용자가 해당 Geohash 영역에 새 글을 작성하면(PostEventPublisher), 서버는 이벤트를 즉시 해당 채널 구독자들에게 전송하여 "주변에 새 글이 등록되었습니다"와 같은 실시간 알림을 가능하게 합니다. 이는 불필요한 API 호출 없이 높은 실시간성을 보장합니다.

### **3.3. DevOps: 자동화된 배포 파이프라인**

* **Docker & Docker Compose:** docker-compose.yml 파일을 통해 Spring Boot 애플리케이션, MariaDB, Redis 데이터베이스를 컨테이너화하여 어떤 환경에서든 동일하게 실행할 수 있도록 구성했습니다.  
* **CI/CD (GitHub Actions):** .github/workflows/deploy.yml에 정의된 파이프라인은 main 브랜치에 코드가 푸시될 때마다 다음 과정을 자동으로 수행합니다.  
  1. 프로젝트를 빌드하고 테스트합니다.  
  2. Docker 이미지를 빌드합니다.  
  3. EC2 서버에 SSH로 접속하여 최신 버전의 Docker 컨테이너를 실행합니다.

이를 통해 개발자는 코드 작성에만 집중할 수 있으며, 배포 과정의 실수를 최소화하고 안정적인 서비스 운영을 보장합니다.

## **4\. 안드로이드 앱 심층 분석 (Kotlin & Jetpack Compose)**

### **4.1. 아키텍처 및 UI**

* **MVVM 아키텍처:** 데이터와 UI를 분리하는 MVVM(Model-View-ViewModel) 패턴을 적용하여 코드의 유지보수성과 테스트 용이성을 높였습니다.  
* **Jetpack Compose:** UI 전체를 최신 기술인 Jetpack Compose로 구축하여 코드의 간결성을 확보하고 생산성을 향상시켰습니다.  
* **Hilt 의존성 주입:** Hilt를 사용하여 ViewModel, Repository 등 클래스 간의 의존성을 외부에서 주입함으로써 코드의 결합도를 낮추고 모듈화된 설계를 구현했습니다.

### **4.2. 핵심 기능: 인터랙티브 지도 (FullMapScreen)**

* **Naver Map SDK 활용:** 지도의 확대/축소, 이동 등 기본적인 상호작용과 함께 마커 표시, 정보 창(Tooltip) 등 다양한 기능을 구현했습니다.  
* **효율적인 마커 관리 (MapClusterManager):** 지도에 수많은 게시물이 표시될 때 발생할 수 있는 성능 저하를 방지하기 위해, 가까운 거리의 마커들을 하나의 클러스터로 묶어주는 **클러스터링** 기술을 적용했습니다. 사용자가 지도를 확대하면 클러스터가 개별 마커로 나뉘어 보이는 등 부드러운 사용자 경험을 제공합니다.  
* **실시간 데이터 연동:** MapViewModel은 백엔드로부터 받은 친구의 실시간 위치 정보, WebSocket을 통해 수신한 새로운 게시글 정보를 StateFlow를 통해 UI에 전달하고, LaunchedEffect를 사용하여 지도 위의 마커를 동적으로 추가하거나 업데이트합니다.

### **4.3. 실시간 상호작용 구현**

* **Firebase Cloud Messaging (FCM):** CampungFirebaseMessagingService는 앱이 백그라운드 상태일 때도 서버로부터 푸시 알림을 수신합니다. 수신된 메시지의 유형(친구 요청, 위치 공유 요청 등)에 따라 사용자에게 알림을 보내거나 특정 화면으로 이동시키는 등 적절한 동작을 수행합니다.  
* **WebSocket:** WebSocketService는 지도 화면에서 서버와 실시간 양방향 통신 채널을 유지합니다. 이를 통해 Geohash 기반의 '주변 새 글' 알림을 지연 없이 수신하여 사용자에게 즉각적으로 피드백을 제공합니다.

## **5\. 결론**

**Campung** 프로젝트는 최신 기술 스택과 창의적인 아이디어를 결합하여 잘 만들어진 위치 기반 소셜 네트워크 서비스입니다.

* **강점:**  
  * **독창적인 기능:** AI를 활용한 '감정 날씨 및 온도' 시스템은 다른 서비스와 차별화되는 강력한 특징입니다.  
  * **견고한 아키텍처:** 백엔드와 안드로이드 모두 확장성과 유지보수성을 고려한 현대적인 아키텍처로 설계되었습니다.  
  * **높은 기술 완성도:** 실시간 통신(WebSocket, FCM), CI/CD 자동화, 클라우드 인프라(AWS, Docker) 등 최신 기술 트렌드를 적극적으로 도입하고 성공적으로 구현했습니다.  
* 프로젝트의 의의:  
  단순한 기능 구현을 넘어, 사용자 경험과 데이터 시각화에 대한 깊은 고민이 돋보이는 프로젝트입니다. 기술적으로는 복잡한 요구사항을 안정적으로 처리하는 서버 아키텍처와, 실시간 데이터를 부드럽게 시각화하는 모바일 UI 기술의 좋은 사례를 보여줍니다.